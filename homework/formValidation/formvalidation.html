<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<form name="myform" action="" >
    <p>
        <label for="name">name: </label>
        <input type="text" name="name" id="name" />
        <span class="errMsg"></span>
    </p>
    <p>
        <label for="phone">phone: </label>
        <input type="text" name="phone" id="phone" />
        <span class="errMsg"></span>
    </p>
    <p>
        <label for="email">email: </label>
        <input type="text" name="email" id="email" />
        <span class="errMsg"></span>
    </p>
    <p>
        <input type="submit" value="send"/>
    </p>

</form>
<script>
    (function(){
        var myform = document.myform;
        var inputs = myform.elements.length;
        var nameInput = document.getElementById("name");
        var phoneInput = document.getElementById("phone");
        var emailInput = document.getElementById("email");
        var errorMessage = "details invalid";
        var isValid = 0;
        function checkInput(elem,rgx){
            if(!rgx.test(elem.value))
            {
                elem.nextElementSibling.innerText = errorMessage;
                elem.nextElementSibling.style.color = "red";
            }else{
                elem.nextElementSibling.innerText = "ok";
                elem.nextElementSibling.style.color = "green";
                isValid += 1;
            }
        }
        nameInput.onblur = function(){
            var rgx = /[a-zA-Z_/-]$/;
            checkInput(this,rgx);
            console.log(isValid);
        }
        phoneInput.onblur = function(){
            var rgx = /\d{3}-\d{7}/;
            checkInput(this,rgx);
            console.log(isValid);
        }
        email.onblur = function(){
            var rgx = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            checkInput(this,rgx);
            console.log(isValid);
        }
        myform.onsubmit = function(){
            if(isValid >= inputs-1){
                alert("good form");
                return true;
            }else{
                alert("form not ok");
                return false;
            }
        }
    })();
</script>
</body>
</html>